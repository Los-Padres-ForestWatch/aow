<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>ForestWatch Area of Work</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/map-style.css">
</head>
<body>

<div id="map"></div>

<!-- Leaflet JS -->
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

<script>
    var map = L.map('map').setView([35.3, -120.5], 8);

    function addLayerWithPopup(geojsonUrl, style, titleText, subtitleText, popupClass) {
    fetch(geojsonUrl)
        .then(res => res.json())
        .then(data => {
            L.geoJSON(data, {
                style: style,
                onEachFeature: function (feature, layer) {
                    layer.on('click', function () {
                        layer.bindPopup(`
                            <div class="popup-card ${popupClass}">
                                <div class="popup-title">${titleText}</div>
                                <div class="popup-subtitle">${subtitleText}</div>
                            </div>
                        `).openPopup();
                    });
                }
            }).addTo(map);
        });
    }

    L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
        attribution: 'Tiles © Esri — Source: Esri, Maxar, Earthstar Geographics',
        maxZoom: 20
    }).addTo(map);

    L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer/tile/{z}/{y}/{x}', {
        maxZoom: 20
    }).addTo(map);

    addLayerWithPopup('layers/lpnf_public-land.geojson',
        { color: '#66CDAA',      
        weight: 1,
        opacity: 0.4,             
        fillColor: '#66CDAA',   
        fillOpacity: 0.4
        },
        'Los Padres', 'National Forest'
    );

    addLayerWithPopup('layers/cpnm_public-land.geojson',
        { color: '#ff7700',      
        weight: 1,
        opacity: 0.4,             
        fillColor: '#ff7700',   
        fillOpacity: 0.4
        },
        'Carrizo Plain', 'National Monument'
    );
</script>

</body>
</html>